---
## Front matter
lang: ru-RU
title: Отчет по лабораторной работе 4. Кибербезопасность предприятия
author:
  - М"Апареев Д.А., Игнатенкова В.Н., Демидович Н.М., Ендонова А.В., Машковцева К.С., Шубнякова Д.И."
institute:
  - Российский университет дружбы народов

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---

# Информация

## Задача 

Научиться обнаруживать и эксплуатировать уязвимости в изолированной сетевой среде для получения несанкционированного доступа к резервным копиям данных, хранящимся на backup-сервере.

Способы получения флага:
1. Поиск backup-сервера
2. Эксплуатация уязвимости ms17

## Выполнение лабораторной работы

ля получения доступа во внутреннюю сеть была использована уязвимость в WordPress-плагине wp_wpdiscuz_unauthenticated_file_upload, позволяющая загрузить вредоносный файл и получить meterpreter-сессию на корпоративном сайте.
Альтернативно можно было использовать уязвимость exchange_proxyshell_rce на почтовом сервере

![Получение meterpreter-сессии](image/01.png)

## Описание сценария

После успешной эксплуатации была получена активная meterpreter-сессия с узлом в DMZ 

![Запуск](image/02.png)

## Описание сценария

![Модель аэропорта](image/3.jpg)

## Поиск backup-сервера

Отображаем конфигурацию сети

![Отображение сетевых интерфейсов](image/04.png)

## Поиск backup-сервера

Прописываем в активной meterpreter-сессии маршрут до данной подсети

![Проброс портов во внутреннюю сеть](image/05.png)

## Поиск backup-сервера

Далее сворачиваем активную сессию и запускаем прокси-сервер с помощью socks

![Запуск прокси-сервера](image/06.png)

## Поиск backup-сервера

Продолжаем сбор информации о найденной подсети с помощью arp_scanner

![arp_scanner](image/07.png)

## Поиск backup-сервера

Далее проводим сканирование открытых портов на найденных хостах, используя модуль portscan/tcp

![Сканирование открытых портов на хосте](image/08.png)

## Поиск backup-сервера

![Сканирование portscan](image/09.png)

## Эксплуатация уязвимости ms17

С помощью модуля scanner/smb проводим сканирование порта smb на наличие уязвимости ms17

![Сканирование порта на наличие уязвимости](image/10.png)

## Эксплуатация уязвимости ms17

Хост уязвим для ms17. Для эксплуатации уязвимости нужно воспользоваться модулем

![Сканирование порта на наличие уязвимости](image/11.png)

## Эксплуатация уязвимости ms17

Необходимый код для решения задания

![Сканирование порта на наличие уязвимости](image/12.png)

## Выводы

В ходе лабораторной работы были успешно выполнены следующие этапы:
1. Получен начальный доступ к узлу в DMZ через уязвимость WordPress/Exchange.
2. Обнаружен backup-сервер во внутренней сети с помощью ARP- и портового сканирования.
3. Эксплуатирована уязвимость MS17-010 для получения полного контроля над backup-сервером.
4. Найден и извлечён файл с флагом.
